{"version":3,"sources":["services/persons.js","components/Filter.js","components/PersonForm.js","components/Person.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","getAll","a","axios","get","allPersons","data","create","newObject","post","returnedObject","update","changedObject","put","id","updatedObject","remove","delete","Filter","value","onChange","PersonForm","onAddPerson","useState","name","setName","number","setNumber","event","target","type","onClick","Person","person","onDeletePerson","window","confirm","Persons","persons","map","key","Notification","message","classes","className","App","setPersons","nameFilter","setNameFilter","ackMessage","setAckMessage","errorMessage","setErrorMessage","useEffect","personService","console","error","fetchData","addPerson","preventDefault","matchingPerson","find","p","shouldUpdate","newPerson","showMessage","updatedPerson","newPersons","filter","deletePerson","setMessage","setTimeout","filteredPersons","length","toLowerCase","includes","rootElement","document","getElementById","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.873040d5.chunk.js","sourcesContent":["import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = async () => {\n  const { data: allPersons } = await axios.get(baseUrl);\n  return allPersons;\n};\n\nconst create = async (newObject) => {\n  const { data: returnedObject } = await axios.post(baseUrl, newObject);\n  return returnedObject;\n};\n\nconst update = async (changedObject) => {\n  const { data: updatedObject } = await axios.put(\n    `${baseUrl}/${changedObject.id}`,\n    changedObject\n  );\n  return updatedObject;\n};\n\nconst remove = (id) => {\n  return axios.delete(`${baseUrl}/${id}`);\n};\n\nexport default { getAll, create, update, remove };\n","import React from \"react\";\n\nconst Filter = ({ value, onChange }) => {\n  return (\n    <div>\n      filter shown with: <input value={value} onChange={onChange} />\n    </div>\n  );\n};\n\nexport default Filter;\n","import React, { useState } from \"react\";\n\nconst PersonForm = ({ onAddPerson }) => {\n  const [name, setName] = useState(\"\");\n  const [number, setNumber] = useState(\"\");\n\n  const handleNameChange = (event) => {\n    setName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNumber(event.target.value);\n  };\n\n  return (\n    <form>\n      <div>\n        name: <input value={name} onChange={handleNameChange} />\n      </div>\n      <div>\n        number: <input value={number} onChange={handleNumberChange} />\n      </div>\n      <div>\n        <button\n          type=\"submit\"\n          onClick={(event) => onAddPerson(event, name, number)}\n        >\n          add\n        </button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Person = ({ person, onDeletePerson }) => {\n  const { id, name, number } = person;\n\n  const handleDeletePerson = () => {\n    if (window.confirm(`Delete ${name}?`)) {\n      onDeletePerson(id, person.name);\n    }\n  };\n\n  return (\n    <p>\n      <strong>{name} </strong>\n      <span>{number} </span>\n      <button onClick={handleDeletePerson}>delete</button>\n    </p>\n  );\n};\n\nexport default Person;\n","import React from \"react\";\nimport Person from \"./Person\";\n\nconst Persons = ({ persons, onDeletePerson }) => {\n  return (\n    <div>\n      {persons.map((person) => (\n        <Person\n          key={person.id}\n          person={person}\n          onDeletePerson={onDeletePerson}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default Persons;\n","import React from \"react\";\n\nconst Notification = ({ type, message }) => {\n  const classes = `notification notification--${type}`;\n  return <>{message && <div className={classes}>{message}</div>}</>;\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from \"react\";\nimport \"./styles.css\";\nimport personService from \"./services/persons\";\n\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [nameFilter, setNameFilter] = useState(\"\");\n  const [ackMessage, setAckMessage] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const data = await personService.getAll();\n        setPersons(data);\n      } catch (e) {\n        console.error(e);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const addPerson = async (event, name, number) => {\n    event.preventDefault();\n    const matchingPerson = persons.find((p) => p.name === name);\n    let shouldUpdate = false;\n\n    if (matchingPerson) {\n      shouldUpdate = window.confirm(\n        `${name} is already added to phonebook, replace the old number with a new one?`\n      );\n    }\n\n    const newPerson = {\n      name,\n      number\n    };\n\n    try {\n      if (!matchingPerson) {\n        const data = await personService.create(newPerson);\n        setPersons([...persons, data]);\n        showMessage(setAckMessage, `Added ${data.name}`);\n      } else if (matchingPerson && shouldUpdate) {\n        const updatedPerson = await personService.update({\n          ...matchingPerson,\n          number\n        });\n        const newPersons = persons.map((p) =>\n          p.id !== matchingPerson.id ? p : updatedPerson\n        );\n        setPersons(newPersons);\n        showMessage(setAckMessage, `Updated ${updatedPerson.name}'s number`);\n      }\n    } catch (e) {\n      // unfortunately handling error from update() here\n      // wanted to handle both cases in one place but noticed\n      // that it brings more pain than benefits\n      showMessage(\n        setErrorMessage,\n        `Information of ${name} has already been removed from server`\n      );\n      setPersons(persons.filter((p) => p.id !== matchingPerson.id));\n      console.error(e);\n    }\n  };\n\n  const deletePerson = async (id, name) => {\n    try {\n      await personService.remove(id);\n      const newPersons = persons.filter((p) => p.id !== id);\n      setPersons(newPersons);\n      showMessage(setAckMessage, `Deleted ${name}`);\n    } catch (e) {\n      showMessage(\n        setErrorMessage,\n        `Information of ${name} has already been removed from server`\n      );\n      setPersons(persons.filter((p) => p.id !== id));\n      console.error(e);\n    }\n  };\n\n  const showMessage = (setMessage, message) => {\n    setMessage(message);\n    setTimeout(() => setMessage(\"\"), 5000);\n  };\n\n  const handleNameFilterChange = (event) => {\n    setNameFilter(event.target.value);\n  };\n\n  const filteredPersons =\n    nameFilter.length > 0\n      ? persons.filter(({ name }) =>\n          name.toLowerCase().includes(nameFilter.toLowerCase())\n        )\n      : persons;\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification type=\"error\" message={errorMessage} />\n      <Notification type=\"ack\" message={ackMessage} />\n      <Filter value={nameFilter} onChange={handleNameFilterChange} />\n      <h3>add a new</h3>\n      <PersonForm onAddPerson={addPerson} />\n      <h3>Numbers</h3>\n      <Persons persons={filteredPersons} onDeletePerson={deletePerson} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}