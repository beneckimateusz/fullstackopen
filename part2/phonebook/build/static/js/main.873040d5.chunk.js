(this["webpackJsonpfullstackopen-part2-phonebook"]=this["webpackJsonpfullstackopen-part2-phonebook"]||[]).push([[0],{20:function(e,t,n){e.exports=n(44)},26:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(18),o=n.n(c),u=n(8),l=n(19),i=n(1),s=n.n(i),f=n(3),p=n(4),m=(n(26),n(6)),d=n.n(m),v="/api/persons",b={getAll:function(){var e=Object(f.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(v);case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(f.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post(v,t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(f.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.put("".concat(v,"/").concat(t.id),t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(e){return d.a.delete("".concat(v,"/").concat(e))}},h=function(e){var t=e.value,n=e.onChange;return a.a.createElement("div",null,"filter shown with: ",a.a.createElement("input",{value:t,onChange:n}))},E=function(e){var t=e.onAddPerson,n=Object(r.useState)(""),c=Object(p.a)(n,2),o=c[0],u=c[1],l=Object(r.useState)(""),i=Object(p.a)(l,2),s=i[0],f=i[1];return a.a.createElement("form",null,a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:o,onChange:function(e){u(e.target.value)}})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{value:s,onChange:function(e){f(e.target.value)}})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit",onClick:function(e){return t(e,o,s)}},"add")))},w=function(e){var t=e.person,n=e.onDeletePerson,r=t.id,c=t.name,o=t.number;return a.a.createElement("p",null,a.a.createElement("strong",null,c," "),a.a.createElement("span",null,o," "),a.a.createElement("button",{onClick:function(){window.confirm("Delete ".concat(c,"?"))&&n(r,t.name)}},"delete"))},k=function(e){var t=e.persons,n=e.onDeletePerson;return a.a.createElement("div",null,t.map((function(e){return a.a.createElement(w,{key:e.id,person:e,onDeletePerson:n})})))},j=function(e){var t=e.type,n=e.message,r="notification notification--".concat(t);return a.a.createElement(a.a.Fragment,null,n&&a.a.createElement("div",{className:r},n))},O=function(){var e=Object(r.useState)([]),t=Object(p.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),i=Object(p.a)(o,2),m=i[0],d=i[1],v=Object(r.useState)(""),w=Object(p.a)(v,2),O=w[0],x=w[1],g=Object(r.useState)(""),y=Object(p.a)(g,2),C=y[0],D=y[1];Object(r.useEffect)((function(){(function(){var e=Object(f.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.getAll();case 3:t=e.sent,c(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var P=function(){var e=Object(f.a)(s.a.mark((function e(t,r,a){var o,i,f,p,m,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o=n.find((function(e){return e.name===r})),i=!1,o&&(i=window.confirm("".concat(r," is already added to phonebook, replace the old number with a new one?"))),f={name:r,number:a},e.prev=5,o){e.next=14;break}return e.next=9,b.create(f);case 9:p=e.sent,c([].concat(Object(l.a)(n),[p])),A(x,"Added ".concat(p.name)),e.next=21;break;case 14:if(!o||!i){e.next=21;break}return e.next=17,b.update(Object(u.a)(Object(u.a)({},o),{},{number:a}));case 17:m=e.sent,d=n.map((function(e){return e.id!==o.id?e:m})),c(d),A(x,"Updated ".concat(m.name,"'s number"));case 21:e.next=28;break;case 23:e.prev=23,e.t0=e.catch(5),A(D,"Information of ".concat(r," has already been removed from server")),c(n.filter((function(e){return e.id!==o.id}))),console.error(e.t0);case 28:case"end":return e.stop()}}),e,null,[[5,23]])})));return function(t,n,r){return e.apply(this,arguments)}}(),S=function(){var e=Object(f.a)(s.a.mark((function e(t,r){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.remove(t);case 3:a=n.filter((function(e){return e.id!==t})),c(a),A(x,"Deleted ".concat(r)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),A(D,"Information of ".concat(r," has already been removed from server")),c(n.filter((function(e){return e.id!==t}))),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),A=function(e,t){e(t),setTimeout((function(){return e("")}),5e3)},I=m.length>0?n.filter((function(e){return e.name.toLowerCase().includes(m.toLowerCase())})):n;return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(j,{type:"error",message:C}),a.a.createElement(j,{type:"ack",message:O}),a.a.createElement(h,{value:m,onChange:function(e){d(e.target.value)}}),a.a.createElement("h3",null,"add a new"),a.a.createElement(E,{onAddPerson:P}),a.a.createElement("h3",null,"Numbers"),a.a.createElement(k,{persons:I,onDeletePerson:S}))},x=document.getElementById("root");o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(O,null)),x)}},[[20,1,2]]]);
//# sourceMappingURL=main.873040d5.chunk.js.map