(this["webpackJsonpfullstackopen-part2-phonebook"]=this["webpackJsonpfullstackopen-part2-phonebook"]||[]).push([[0],{20:function(e,t,n){e.exports=n(44)},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(18),o=n.n(c),u=n(8),l=n(19),s=n(1),i=n.n(s),p=n(3),f=n(4),m=function(e){var t=e.value,n=e.onChange;return a.a.createElement("div",null,"filter shown with: ",a.a.createElement("input",{value:t,onChange:n}))},d=function(e){var t=e.type,n=e.message,r="notification notification--".concat(t);return a.a.createElement(a.a.Fragment,null,n&&a.a.createElement("div",{className:r},n))},v=function(e){var t=e.onAddPerson,n=Object(r.useState)(""),c=Object(f.a)(n,2),o=c[0],u=c[1],l=Object(r.useState)(""),s=Object(f.a)(l,2),i=s[0],p=s[1];return a.a.createElement("form",null,a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:o,onChange:function(e){u(e.target.value)}})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{value:i,onChange:function(e){p(e.target.value)}})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit",onClick:function(e){return t(e,o,i)}},"add")))},b=function(e){var t=e.person,n=e.onDeletePerson,r=t.id,c=t.name,o=t.number;return a.a.createElement("p",null,a.a.createElement("strong",null,c," "),a.a.createElement("span",null,o," "),a.a.createElement("button",{onClick:function(){window.confirm("Delete ".concat(c,"?"))&&n(r,t.name)}},"delete"))},h=function(e){var t=e.persons,n=e.onDeletePerson;return a.a.createElement("div",null,t.map((function(e){return a.a.createElement(b,{key:e.id,person:e,onDeletePerson:n})})))},E=n(6),w=n.n(E),k="/api/persons",j={getAll:function(){var e=Object(p.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get(k);case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(p.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.post(k,t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),console.error(e.t0.response.data.error),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(p.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.put("".concat(k,"/").concat(t.id),t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),console.error(e.t0.response.data.error),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),remove:function(e){return w.a.delete("".concat(k,"/").concat(e))}},O=(n(43),function(){var e=Object(r.useState)([]),t=Object(f.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),s=Object(f.a)(o,2),b=s[0],E=s[1],w=Object(r.useState)(""),k=Object(f.a)(w,2),O=k[0],x=k[1],g=Object(r.useState)(""),y=Object(f.a)(g,2),C=y[0],D=y[1];Object(r.useEffect)((function(){(function(){var e=Object(p.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.getAll();case 3:t=e.sent,c(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var P=function(){var e=Object(p.a)(i.a.mark((function e(t,r,a){var o,s,p,f,m,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o=n.find((function(e){return e.name===r})),s=!1,o&&(s=window.confirm("".concat(r," is already added to phonebook, replace the old number with a new one?"))),p={name:r,number:a},e.prev=5,o){e.next=13;break}return e.next=9,j.create(p);case 9:(f=e.sent)&&(c([].concat(Object(l.a)(n),[f])),A(x,"Added ".concat(f.name))),e.next=18;break;case 13:if(!o||!s){e.next=18;break}return e.next=16,j.update(Object(u.a)(Object(u.a)({},o),{},{number:a}));case 16:(m=e.sent)&&(d=n.map((function(e){return e.id!==o.id?e:m})),c(d),A(x,"Updated ".concat(m.name,"'s number")));case 18:e.next=25;break;case 20:e.prev=20,e.t0=e.catch(5),A(D,"Information of ".concat(r," has already been removed from server")),c(n.filter((function(e){return e.id!==o.id}))),console.error(e.t0);case 25:case"end":return e.stop()}}),e,null,[[5,20]])})));return function(t,n,r){return e.apply(this,arguments)}}(),S=function(){var e=Object(p.a)(i.a.mark((function e(t,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.remove(t);case 3:a=n.filter((function(e){return e.id!==t})),c(a),A(x,"Deleted ".concat(r)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),A(D,"Information of ".concat(r," has already been removed from server")),c(n.filter((function(e){return e.id!==t}))),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),A=function(e,t){e(t),setTimeout((function(){return e("")}),5e3)},I=b.length>0?n.filter((function(e){return e.name.toLowerCase().includes(b.toLowerCase())})):n;return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(d,{type:"error",message:C}),a.a.createElement(d,{type:"ack",message:O}),a.a.createElement(m,{value:b,onChange:function(e){E(e.target.value)}}),a.a.createElement("h3",null,"add a new"),a.a.createElement(v,{onAddPerson:P}),a.a.createElement("h3",null,"Numbers"),a.a.createElement(h,{persons:I,onDeletePerson:S}))}),x=document.getElementById("root");o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(O,null)),x)}},[[20,1,2]]]);
//# sourceMappingURL=main.af5de6cd.chunk.js.map